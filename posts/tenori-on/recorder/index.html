<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>MIDI recording</title>
	<meta name="description" content="">
	<meta name="generator" content="Hugo 0.48" />
	
	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	<script type="text/javascript" src="/js/scripts.js"></script>
	<link rel="shortcut icon" href="/favicon.ico">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-163129209-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body class="body">
	<div class="container container-outer">
		<header class="header">
	<div class="container container-inner">
		<div class="logo" role="banner">
			<a class="logo__link" href="/" title="pika.blue" rel="home">
				<div class="logo__title">pika.blue</div>
				<div class="logo__tagline">Random Project Repository </div>
			</a>
		</div>
	</div>
	<img style="position: absolute; top:24px; right: 32px" src="http://pika.blue/images/pikabluesmall.png" alt="logo" />
	
<nav class="menu">
	<ul class="menu__list">
		<li class="menu__item"><a class="menu__link" href="/">HOME</a></li>
		<li class="menu__item"><a class="menu__link" href="/categories/tenori-on/">TENORI-ON</a></li>
		<li class="menu__item"><a class="menu__link" href="/categories/fc-300/">FC-300</a></li>
	</ul>
</nav>

</header>

		<div class="wrapper flex">
			
<main class="main content">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MIDI recording</h1><div class="post__meta meta">
<svg class="icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-.0000003c-4.4 0-8 3.6-8 8 0 4.4000003 3.6 8.0000003 8 8.0000003 4.4 0 8-3.6 8-8.0000003 0-4.4-3.6-8-8-8zm0 14.4000003c-3.52 0-6.4-2.88-6.4-6.4000003 0-3.52 2.88-6.4 6.4-6.4 3.52 0 6.4 2.88 6.4 6.4 0 3.5200003-2.88 6.4000003-6.4 6.4000003zm.4-10.4000003h-1.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg>
<time class="post__meta-date meta-date" datetime="2020-06-13T00:00:00">June 13, 2020</time>
<span class="post__meta-categories meta-categories">
	<svg class="icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg>
	<span class="meta-categories__list"><a class="meta-categories__link" href="/categories/tenori-on" rel="category">tenori-on</a></span>
</span></div>
		</header><div class="post__content clearfix">
			

<p>This function adds MIDI (note on) recording to all layers.</p>

<p>The baseline TNR already implements external setting of notes via remote (SysEx) messaging. Also, receiving note-on/note-off messages already stimulates the tone generator to play the correct sound, but does not set the notes in the grid.</p>

<p>This modification joins the two, so that the TNR can record incoming midi note-on streams. The behaviour is slightly different depending on the layer targetted.</p>

<p>This function is found under the MIDI menu:</p>

<table>
<thead>
<tr>
<th><img src="/images/recordmode.png" alt="" title="MIDI Recording menu" /></th>
<th><img src="/images/recordtime.png" alt="" title="Selecting record mode" /></th>
</tr>
</thead>

<tbody>
</tbody>
</table>

<p>Some notes:</p>

<ol>
<li><p>The function is enabled by the Record Mode entry under the MIDI menu. This enables the recording mode to be switched between &ldquo;Time&rdquo; and &ldquo;Velocity&rdquo;</p></li>

<li><p>Only Note-on information is recorded. The internal workings of the TNR rely on knowing the sound duration when the note-on occurs; the durations are not established from the note-off event. Play back of recorded data uses the layer&rsquo;s sound length time.</p></li>

<li><p>Velocity is not recorded. (The TNR doesn&rsquo;t generally handle velocity). The velocity output of played back notes is fixed at 100.</p></li>

<li><p>Notes incoming on midi channel 1 will be recorded on layer 1, those on midi channel 2 will record on layer 2, irrespective of what the output midi channel is set to for that layer. This is deliberate in order to disambiguate from cases where several layers have the same midi channel number, as well as to avoid the need to &ldquo;hunt&rdquo; the layers for matching midi channels.</p></li>

<li><p>Only notes that the TNR could play with the current settings are recorded. That means that only notes in the current layer scale, within the current transpose and octave range, are recorded. Incoming notes not in the scale may be heard - since the tone generator will still play them - but they will not be recorded.</p></li>

<li><p>All loops are in continuous punch-in/overwrite mode. Deletion of notes has to be via interaction with the TNR itself, e.g. via layer clear, or specific deselection of notes.</p></li>

<li><p>The behaviour is different for different layer types. In &ldquo;Time&rdquo; mode, the following occurs</p>

<ul>
<li>Score records notes at the current loop position as might be anticipated. Quantization occurs at the loop speed of the layer.</li>
<li>Random records the pitch, but the other on-screen axis position is random. Consequently the timing of the playback is random.</li>
<li>Draw records the pitch, but the other on-screen axis position is random. The timing is quantized at draw&rsquo;s loop tick (which is 24 times faster than score&rsquo;s, for the same loop speed). Draw is therefore a good general recording target if you don&rsquo;t want quantized data, and don&rsquo;t need to edit it afterwards.</li>
<li>Bounce records the pitch, but assumes you are pressing the top row.</li>
<li>Push records the pitch, but the other on-screen axis position is random.</li>
<li>Score256 does not have recording capability (yet).</li>
</ul></li>

<li><p>In &ldquo;Velocity&rdquo; mode, the following occurs</p>

<ul>
<li>Score uses the incoming note velocity to determine which column to draw the note, split evenly from <code>01-7F</code>. HIgh velocities are drawn on the right, low ones on the left.</li>
<li>Random records the pitch, but the other on-screen axis position is determined by velocity. The timing of the playback is therefore not random, as such, but it is difficult to control.</li>
<li>Draw records the pitch, the other on-screen axis position is taken from the velocity. The time-quantization is as per the &ldquo;Time&rdquo; mode</li>
<li>Bounce records the pitch, but places notes towards the bottom for high velocities, and the top for low velocities. Bounce therefore provides the only way in which notes can be turned off, since a high velocity corresponds to the bottom row, which is Off in bounce mode.</li>
<li>Push records the pitch, the other axis is dictated by the incoming velocity.</li>
<li>Score256 does not have recording capability (yet).<br /></li>
</ul></li>

<li><p>Only layers that are set to &ldquo;pure&rdquo; instruments can be recorded to. Layers with velocity, octave or duration splits, or controller layers, or meta controller layers, can not record incoming notes.</p></li>

<li><p>It might be nice to have a &ldquo;clear track&rdquo; or &ldquo;clear note&rdquo; message - e.g. a low note not likely to represent a real recorded note, or a controller message - in order to allow hands-free recording. Again, suggestions welcome.</p></li>
</ol>

<p>I also sorted out what - to me - was a discrepancy. In the original TNR firmware, received patch change commands (<code>B0 00 3F / B0 20 01 / C0 nn</code>) would change the on-board tone of the Tone Generator, but not actually update the instrument on the screen. This is now corrected so that the displayed instrument always tracks the instrument that the tone generator is playing.</p>

<h2 id="compatibility-issues">Compatibility Issues</h2>

<p>None known - there may be compatibility issues with hardware setups if the TNR was previously being bombarded by note-on messages.</p>

<h2 id="releases">Releases</h2>

<p>First included in A018, broken in A019, and fixed in A021. (Let&rsquo;s hope it stays fixed).</p>

		</div>
		
<div class="post__tags tags clearfix">
	<svg class="icon icon-tag" width="16" height="16" viewBox="0 0 16 16"><path d="M16 9.5c0 .373-.24.74-.5 1l-5 5c-.275.26-.634.5-1 .5-.373 0-.74-.24-1-.5L1 8a2.853 2.853 0 0 1-.7-1C.113 6.55 0 5.973 0 5.6V1.4C0 1.034.134.669.401.401.67.134 1.034 0 1.4 0h4.2c.373 0 .95.113 1.4.3.45.187.732.432 1 .7l7.5 7.502c.26.274.5.632.5.998zM3.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/new-features/" rel="tag">new features</a></li>
	</ul>
</div>
	</article>
	
<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Pika Blue avatar" src="/images/pikablue.png" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">About Pika Blue</span>
	</div>
	<div class="authorbox__description">
		Pika Blue is overly obsessed with midi controllers, especially unsupported ones with blinky lights .
	</div>
</div>
	
<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/posts/tenori-on/midiquiet/" rel="prev"><span class="post-nav__caption">«&thinsp;Previous</span><p class="post-nav__post-title">Suppress Midi SysEx (updated)</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/posts/tenori-on/meta2_tr/" rel="next"><span class="post-nav__caption">Next&thinsp;»</span><p class="post-nav__post-title">Meta Controller - Master Transpose</p></a>
	</div>
</nav>
	
</main>

			<aside class="sidebar"><div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/posts/tenori-on/releases/">Releases</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/tenori-on/transport/">MIDI Transport Controls</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/tenori-on/splits/">Splits</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/tenori-on/xy/">XY layer type</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/tenori-on/meta_velpan/">Layer Meta Controllers</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/new-features" title="New features">New features (20)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/project-plan" title="Project plan">Project plan (2)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/stock-features" title="Stock features">Stock features (3)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/tools" title="Tools">Tools (2)</a>
	</div>
</div><div class="widget-social widget">
	<h4 class="widget-social__title widget__title">Social</h4>
	<div class="widget-social__content widget__content">
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="Email" href="mailto:info@pika.blue">
				<svg class="widget-social__link-icon icon-mail" viewBox="0 0 416 288" width="24" height="24" fill="#fff"><path d="m0 16v256 16h16 384 16v-16-256-16h-16-384-16zm347 16-139 92.5-139-92.5zm-148 125.5 9 5.5 9-5.5 167-111.5v210h-352v-210z"/></svg>
				<span>info@pika.blue</span>
			</a>
		</div>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container container-inner">
		<div class="footer__copyright">&copy; 2021 pika.blue. <span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and a modified <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span></div>
	</div>
</footer>

	</div>
<script>
	var navigation = responsiveNav(".menu", {
		navClass: "menu--collapse",
		label: "Menu",
	});
</script></body>
</html>